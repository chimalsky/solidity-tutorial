# solidity tutorial

Forked from `git@github.com:CoinbaseStablecoin/solidity-tutorial.git`

Using to get familiar with `ethers` library and how it interfaces with node providers,
such as `infura`.

See the original repo for installation commands if required.

# Testing CLI commands

> You will need `GoerliETH` to run transactinos. Use your choice of test-faucets to get some.
There is no script in this repo that automatically gives you some. As of August, 2023 this
faucet works: https://goerli-faucet.pk910.de/

## Creating wallet

`node src/createWallet.js`

Copy the Mnemonic phrase. Paste it into`.env` as `SEED` value

## Configure Infura provider API

Set `INFURA` api key value in `.env`

## Fund your account

Send some `GoerliETH` to the account that was generated when running `createWallet.js`. This testnet ETH
is required as gas fees when invoking transactions.

## Check balance

`node src/checkBalance.js`

Output will include your Mneomic phrase and your account address followed by balance info:

```
Mnemonic: REMOVED
Address: 0xA6799fF1269F6Dcc6aDE81Af1b8a8767f95A7a2e
ETH Balance: 0.03180497382392256
USDC Balance: 344.5
```

## Send ETH Transaction

Once you have enough GoerliETH in your account -- enough to afford the gas fees -- try to transfer
ETH to another account.

To transfer `.001` ETH to `0x3E04c0E3E5a09b3419B425C8EAE917baa738F6eF`

`node src/transferETH.js 0x3E04c0E3E5a09b3419B425C8EAE917baa738F6eF .001`

Result:

```
Mnemonic: REMOVED
Address: 0xA6799fF1269F6Dcc6aDE81Af1b8a8767f95A7a2e
Transferring 0.001 ETH to 0x3E04c0E3E5a09b3419B425C8EAE917baa738F6eF...
Transaction hash: 0xe70eff2f735a402cf47b4a4933d275f7ce645d58459ca3fea2a5f09b147580bd
```

## Send USDC Transaction

`node src/transferUSDC.js `

Result:

```
Mnemonic: REMOVED
Address: 0xA6799fF1269F6Dcc6aDE81Af1b8a8767f95A7a2e
Transferring 2.0 USDC to 0x3E04c0E3E5a09b3419B425C8EAE917baa738F6eF...
Transaction hash: 0xf15167cf430ce344b1b318b8ba8b2a4e569e613390aabfc97d5040b080499421
```

# Abe's Notes

> Much of the following is generated by ChatGPT (version 4)

## What is the difference between `wallet` and `account` ?

In the context of Ethereum and the ethers.js library, a "wallet" and an "account" are related but distinct concepts:

A wallet is a software construct that manages your private key and provides methods for signing transactions and messages. This can be likened to a real wallet, which holds your credit cards (which you can think of like your private keys) and provides a way for you to use them to authorize transactions.

An account, on the other hand, is associated with a pair of public and private Ethereum keys. The public key (or the derived Ethereum address) is what you share with others to receive funds, while the private key is what you use to sign transactions and must keep secret.

1. The wallet object is created from a mnemonic, which is a human-readable representation of a private key. This wallet object can sign transactions, but it doesn't know about the state of the Ethereum network.

```js
const wallet = ethers.Wallet.fromMnemonic(mnemonic);
```

2. To interact with the Ethereum network (for example, to check balances or send transactions), you need a provider. A provider is an object that knows how to communicate with the Ethereum network.

```js
const provider = ethers.getDefaultProvider("goerli", {
  infura: process.env.INFURA,
});
```

3. Finally, you connect the wallet with the provider to create a connected wallet (or "account" in the context of your script). This is a wallet that knows how to interact with the Ethereum network. You can use this connected wallet to interact with smart contracts, check balances, and send transactions.

```js
const account = wallet.connect(provider);
```

So in summary, a "wallet" manages your private key and signs transactions, while an "account" is a wallet that's connected to the Ethereum network through a provider. In your script, "account" is just the name chosen for the connected wallet, but it could be named differently (for example, connectedWallet).


## Distinction between "private key", "wallet", and "account"

Yes, the terms "private key", "wallet", and "account" represent distinct concepts in Ethereum, although they're closely related:

- An *Ethereum private key* is a 64-character hexadecimal string that is used to sign transactions on the Ethereum network. This private key is directly associated with an Ethereum public key (and derived Ethereum address), and together they form an asymmetric key pair used in Ethereum's cryptographic functions.
- An *Ethereum wallet* is a software construct that manages your private key and provides functionality related to it, like signing transactions and messages. Wallets can hold one or more private keys. Wallets also often provide the interface to interact with the Ethereum network (though they need to use a provider for that, which is the link to the Ethereum network).
- An *Ethereum account*, in the context of ethers.js, is typically a wallet that's connected to a provider. This allows the wallet (and the private key it manages) to interact with the Ethereum network -- to query data from the network and to send transactions to it. In general Ethereum terminology, "account" usually refers to an address on the Ethereum blockchain, which is derived from the public key (and by extension from the private key).

## if a wallet can hold more than one private key... does that mean the wallet itself doesn't have its own private key? what is the key to the wallet itself?

In Ethereum, a wallet doesn't have a separate "key" of its own. Instead, it manages one or more private keys, each of which corresponds to a specific Ethereum address.

When we talk about a wallet holding more than one private key, we usually mean that it's managing multiple Ethereum accounts. Each private key is effectively its own account, with its own balance of Ether and potentially other tokens.

There are some wallet implementations, called Hierarchical Deterministic (HD) wallets, that generate multiple private keys from a single "seed". This seed is a piece of secret data (often represented as a mnemonic phrase) from which all the wallet's private keys can be deterministically derived. This makes backup and restoration of the wallet easier, as you only need to secure and backup the seed, rather than each individual private key.

However, even in this case, the seed isn't a "key" to the wallet in the sense that it can be used to control all the private keys at once. Instead, each private key derived from the seed is still used individually to sign transactions for its corresponding Ethereum address.

In short, the wallet is essentially a management tool for handling private keys (and their associated Ethereum addresses) and facilitating interactions with the Ethereum network via a provider. It doesn't have a private key of its own.

## if an ethereum wallet doesn't have it's own separate key... how does a person verify/validate that they own that wallet?

In Ethereum, ownership of a wallet is equivalent to ownership of the private keys that the wallet manages.

In order to prove that you "own" a wallet (or more accurately, an Ethereum address), you need to prove that you control the private key associated with that address. This is usually done by signing a message or a transaction with that private key.

When you sign a message or transaction, you create a digital signature. This signature can be verified by others using your public key (or Ethereum address derived from that public key), but it cannot be forged without knowledge of the private key. Therefore, if you can produce a valid signature for a particular address, you've proven that you control the private key for that address, and hence "own" the wallet.

This is a fundamental aspect of how public-key cryptography works, which underpins the security and ownership model of Ethereum and many other blockchain systems.

Note that this is different from traditional online accounts, where ownership is usually proven by providing a correct password associated to a username. In Ethereum, there are no usernames or passwords, only keys: private keys for signing and public keys (or addresses) for verifying.


## so for all intents and purposes to other actors on the ethereum network... they don't need any conception of who owns which wallet. The only thing that matters is who owns which account?

Yes, that's correct.

On the Ethereum network, what matters is who controls the private keys associated with specific Ethereum addresses (often also referred to as accounts). The concept of "wallets" is more of a user-friendly abstraction for managing these keys and interacting with the network, but from the network's perspective, transactions are made from addresses and the ownership of these addresses is verified via the ability to produce a valid signature using the corresponding private key.

Other network participants don't see wallets or know how your keys are stored or managed; they only see addresses and signed transactions. If you control the private key, you control the address and the assets associated with that address, no matter how the key is stored (whether it's in a software wallet, a hardware wallet, or some other form of key management system).

So in short, yes, to the Ethereum network and its participants, the controlling of private keys (and hence Ethereum addresses/accounts) is the crucial aspect. The management of these keys (i.e., the wallet) is mainly of concern to the key holder.

## based on an account and its public address. can other parties on the ethereum network discern which wallet the account belongs to?

No, other parties on the Ethereum network cannot discern which wallet software a given Ethereum account belongs to just by looking at the account's public address. This is because all transactions on the Ethereum network, regardless of which wallet software was used to create and sign them, follow the same format.

When you use a wallet to sign a transaction, you're using your private key to generate a digital signature. This process is the same regardless of which wallet you use, and it doesn't leave any "marks" that could identify the specific wallet software.

The public address of an account is derived from the public portion of a private-public key pair and does not contain any information about the wallet used to manage that key pair. It's a uniform identifier that doesn't reveal the specifics of how or where the associated private key is stored or managed.

So, as long as the wallet software follows the same cryptographic standards as every other wallet (which it should), there's no practical way for an outside observer to determine which wallet was used to sign a particular transaction or manage a particular account.

This aspect contributes to the privacy and fungibility of Ethereum transactions. Everyone can verify that a transaction is valid and see its effects, but they don't know the details of the wallet involved in its creation.







---

MIT License
